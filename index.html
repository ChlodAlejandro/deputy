<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>deputy</title><meta name="description" content="Documentation for deputy"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">deputy</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>deputy</h1></div><div class="tsd-panel tsd-typography"><a id="md:deputy" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Deputy<a href="#md:deputy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><img align="right" width="70" height="70" alt="Deputy logo" src="https://upload.wikimedia.org/wikipedia/commons/2/2b/Deputy_logo.svg">
<p><a href="https://w.wiki/7NWR" target="_blank" class="external">Deputy</a> is
a <a href="https://en.wikipedia.org/wiki/Wikipedia:Contributor_copyright_investigations" target="_blank" class="external">contributor copyright investigation</a> (CCI) and copyright cleanup assistance tool for Wikipedia. Its goal is to streamline the workflow for CCI case pages, making it easier to
process and go through each case. For user-specific information, see <a href="https://en.wikipedia.org/wiki/Wikipedia:Deputy" target="_blank" class="external">Wikipedia:Deputy</a>.</p>
<p>Deputy exposes a <code>deputy</code> variable on the <code>window</code> object for public use. The API is documented
at <a href="https://chlodalejandro.github.io/deputy/classes/Deputy.html" target="_blank" class="external">chlodalejandro.github.io/deputy</a>.</p>
<p>Deputy relies on modules from <a href="https://github.com/ChlodAlejandro/deputy-dispatch" target="_blank" class="external">Dispatch</a> to
perform bulk data operations. Dispatch is hosted on Wikimedia Toolforge, more information can be
found <a href="https://github.com/ChlodAlejandro/deputy-dispatch#README" target="_blank" class="external">here</a>.</p>
<a id="md:installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#md:installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>See <a href="https://en.wikipedia.org/wiki/Wikipedia:Deputy#Installation" target="_blank" class="external">Wikipedia:Deputy ยง Installation</a> on the English Wikipedia for more information.</p>
<a id="md:developing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Developing<a href="#md:developing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Please clone with submodules (<code>--recursive</code>/<code>--recurse-submodules</code>) to ensure that
<a href="https://github.com/ChlodAlejandro/deputy-dispatch-types" target="_blank" class="external">Dispatch types</a>
are also cloned alongside the repo.</p>
<p>If you forgot to clone with submodules, just run the following commands to
initialize the submodule for types:</p>
<pre><code class="bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">submodule</span><span class="hl-1"> </span><span class="hl-2">update</span><span class="hl-1"> </span><span class="hl-3">--init</span><span class="hl-1"> </span><span class="hl-3">--recursive</span>
</code><button type="button">Copy</button></pre>

<p>Run the development server with the following. Be sure to run <code>npm install</code> first to download required dependencies.</p>
<pre><code class="shell"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">dev</span>
</code><button type="button">Copy</button></pre>

<p>Import the script into your user JavaScript file of
choice (<a href="https://en.wikipedia.org/wiki/Special:MyPage/common.js" target="_blank" class="external">common.js</a>) with the following:</p>
<pre><code class="js"><span class="hl-4">mw</span><span class="hl-1">.</span><span class="hl-4">loader</span><span class="hl-1">.</span><span class="hl-0">load</span><span class="hl-1">( </span><span class="hl-2">&quot;http://localhost:45000/Deputy.js&quot;</span><span class="hl-1"> );</span><br/><span class="hl-4">mw</span><span class="hl-1">.</span><span class="hl-0">hook</span><span class="hl-1">( </span><span class="hl-2">&#39;deputy.preload&#39;</span><span class="hl-1"> ).</span><span class="hl-0">add</span><span class="hl-1">( </span><span class="hl-3">function</span><span class="hl-1"> () {</span><br/><span class="hl-1">	</span><span class="hl-5">// Replace resource root to load local development assets</span><br/><span class="hl-1">	</span><span class="hl-4">window</span><span class="hl-1">.</span><span class="hl-4">deputy</span><span class="hl-1">.</span><span class="hl-4">resourceRoot</span><span class="hl-1"> = { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-2">&quot;url&quot;</span><span class="hl-1">, </span><span class="hl-4">url:</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">URL</span><span class="hl-1">( </span><span class="hl-2">&quot;http://localhost:45000/&quot;</span><span class="hl-1"> ) };</span><br/><span class="hl-1">	</span><span class="hl-4">window</span><span class="hl-1">.</span><span class="hl-4">deputy</span><span class="hl-1">.</span><span class="hl-0">getWikiConfig</span><span class="hl-1">().</span><span class="hl-0">then</span><span class="hl-1">( </span><span class="hl-3">function</span><span class="hl-1"> (</span><span class="hl-4">wikiConfig</span><span class="hl-1">) {</span><br/><span class="hl-1">		</span><span class="hl-5">// Used to test in a sandbox environment than on the actual CCI pagespace.</span><br/><span class="hl-1">		</span><span class="hl-5">// Feel free to change the values to fit your sandbox.</span><br/><span class="hl-1">		</span><span class="hl-4">wikiConfig</span><span class="hl-1">.</span><span class="hl-4">cci</span><span class="hl-1">.</span><span class="hl-4">rootPage</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-4">mw</span><span class="hl-1">.</span><span class="hl-0">Title</span><span class="hl-1">( </span><span class="hl-2">&#39;User:Chlod/Scripts/Deputy/tests&#39;</span><span class="hl-1"> ));</span><br/><span class="hl-1">		</span><span class="hl-4">wikiConfig</span><span class="hl-1">.</span><span class="hl-4">ia</span><span class="hl-1">.</span><span class="hl-4">rootPage</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-4">mw</span><span class="hl-1">.</span><span class="hl-0">Title</span><span class="hl-1">(</span><span class="hl-2">&quot;User:Chlod/Scripts/Deputy/tests/Problems&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">	} );</span><br/><span class="hl-1">} );</span>
</code><button type="button">Copy</button></pre>

<a id="md:testing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Testing<a href="#md:testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:live-testing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Live testing<a href="#md:live-testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Bleeding edge builds of Deputy are always provided through <a href="https://github.com/ChlodAlejandro/deputy/actions" target="_blank" class="external">GitHub Actions</a>. You may experiment with these versions of Deputy, but keep in mind that they are <strong>extremely unstable</strong>
and significant bugs may be found. Nevertheless,
please <a href="https://github.com/ChlodAlejandro/deputy/issues" target="_blank" class="external">report bugs found</a> so that they may be actioned on.</p>
<a id="md:automated-testing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Automated testing<a href="#md:automated-testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Unit and end-to-end tests exist for Deputy and can be found in the <a href="tests"><code>tests/</code></a> directory. These tests are run with
Selenium and Jest. This ensures that Deputy's most vital components work as expected. Tests are still incomplete and
coverage is not available, however by the end of the project, at least one end-to-end test should be finished.</p>
<p>You can trigger automated testing by running the following:</p>
<pre><code class="shell"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">test</span>
</code><button type="button">Copy</button></pre>

<p>You may also modify the browser to be used with Selenium using the <code>BROWSER</code> environment variable.</p>
<p>You <strong>must</strong> have the appropriate browser driver installed for whichever browser you wish to test on. If you want to test on Chrome browsers, run <code>npm i -g chromedriver@106.x</code> prior to running any tests (and change <code>106</code> to whichever version of Chrome you're using). For Firefox, run <code>npm i -g geckodriver</code>. Not having the proper browser driver installed with causes tests to fail.</p>
<p>Some automated tests require an internet connection as they load English Wikipedia pages. Ensure that you have a working (and decently fast) internet connection to pass tests.</p>
<a id="md:licensing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Licensing<a href="#md:licensing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code><span class="hl-4">Copyright</span><span class="hl-1"> </span><span class="hl-6">2022</span><span class="hl-1"> </span><span class="hl-4">Chlod</span><span class="hl-1"> </span><span class="hl-4">Aidan</span><span class="hl-1"> </span><span class="hl-4">Alejandro</span><br/><br/><span class="hl-4">Licensed</span><span class="hl-1"> </span><span class="hl-4">under</span><span class="hl-1"> </span><span class="hl-4">the</span><span class="hl-1"> </span><span class="hl-4">Apache</span><span class="hl-1"> </span><span class="hl-4">License</span><span class="hl-1">, </span><span class="hl-4">Version</span><span class="hl-1"> </span><span class="hl-6">2.0</span><span class="hl-1"> (</span><span class="hl-4">the</span><span class="hl-1"> </span><span class="hl-2">&quot;License&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">you</span><span class="hl-1"> </span><span class="hl-4">may</span><span class="hl-1"> </span><span class="hl-4">not</span><span class="hl-1"> </span><span class="hl-4">use</span><span class="hl-1"> </span><span class="hl-3">this</span><span class="hl-1"> </span><span class="hl-4">file</span><span class="hl-1"> </span><span class="hl-4">except</span><span class="hl-1"> </span><span class="hl-3">in</span><span class="hl-1"> </span><span class="hl-4">compliance</span><span class="hl-1"> </span><span class="hl-7">with</span><span class="hl-1"> </span><span class="hl-4">the</span><span class="hl-1"> </span><span class="hl-4">License</span><span class="hl-1">.</span><br/><span class="hl-4">You</span><span class="hl-1"> </span><span class="hl-4">may</span><span class="hl-1"> </span><span class="hl-4">obtain</span><span class="hl-1"> </span><span class="hl-4">a</span><span class="hl-1"> </span><span class="hl-4">copy</span><span class="hl-1"> </span><span class="hl-3">of</span><span class="hl-1"> </span><span class="hl-4">the</span><span class="hl-1"> </span><span class="hl-4">License</span><span class="hl-1"> </span><span class="hl-4">at</span><br/><br/><span class="hl-1">       </span><span class="hl-8">https</span><span class="hl-1">:</span><span class="hl-5">//www.apache.org/licenses/LICENSE-2.0</span><br/><br/><span class="hl-4">Unless</span><span class="hl-1"> </span><span class="hl-4">required</span><span class="hl-1"> </span><span class="hl-4">by</span><span class="hl-1"> </span><span class="hl-4">applicable</span><span class="hl-1"> </span><span class="hl-4">law</span><span class="hl-1"> </span><span class="hl-4">or</span><span class="hl-1"> </span><span class="hl-4">agreed</span><span class="hl-1"> </span><span class="hl-4">to</span><span class="hl-1"> </span><span class="hl-3">in</span><span class="hl-1"> </span><span class="hl-4">writing</span><span class="hl-1">, </span><span class="hl-4">software</span><br/><span class="hl-4">distributed</span><span class="hl-1"> </span><span class="hl-4">under</span><span class="hl-1"> </span><span class="hl-4">the</span><span class="hl-1"> </span><span class="hl-4">License</span><span class="hl-1"> </span><span class="hl-4">is</span><span class="hl-1"> </span><span class="hl-4">distributed</span><span class="hl-1"> </span><span class="hl-4">on</span><span class="hl-1"> </span><span class="hl-4">an</span><span class="hl-1"> </span><span class="hl-2">&quot;AS IS&quot;</span><span class="hl-1"> </span><span class="hl-9">BASIS</span><span class="hl-1">,</span><br/><span class="hl-9">WITHOUT</span><span class="hl-1"> </span><span class="hl-9">WARRANTIES</span><span class="hl-1"> </span><span class="hl-9">OR</span><span class="hl-1"> </span><span class="hl-9">CONDITIONS</span><span class="hl-1"> </span><span class="hl-9">OF</span><span class="hl-1"> </span><span class="hl-9">ANY</span><span class="hl-1"> </span><span class="hl-9">KIND</span><span class="hl-1">, </span><span class="hl-4">either</span><span class="hl-1"> </span><span class="hl-4">express</span><span class="hl-1"> </span><span class="hl-4">or</span><span class="hl-1"> </span><span class="hl-4">implied</span><span class="hl-1">.</span><br/><span class="hl-4">See</span><span class="hl-1"> </span><span class="hl-4">the</span><span class="hl-1"> </span><span class="hl-4">License</span><span class="hl-1"> </span><span class="hl-4">for</span><span class="hl-1"> </span><span class="hl-4">the</span><span class="hl-1"> </span><span class="hl-4">specific</span><span class="hl-1"> </span><span class="hl-4">language</span><span class="hl-1"> </span><span class="hl-4">governing</span><span class="hl-1"> </span><span class="hl-4">permissions</span><span class="hl-1"> </span><span class="hl-4">and</span><br/><span class="hl-4">limitations</span><span class="hl-1"> </span><span class="hl-4">under</span><span class="hl-1"> </span><span class="hl-4">the</span><span class="hl-1"> </span><span class="hl-4">License</span><span class="hl-1">.</span>
</code><button>Copy</button></pre>

<p>The userscript is bundled with multiple dependencies, all of which have been manually vetted for compatibility with the
Apache License 2.0. The userscript, in particular, bundles with the following libraries:</p>
<ul>
<li><a href="https://github.com/Microsoft/tslib" target="_blank" class="external">tslib</a> - 0BSD, Microsoft - For TypeScript polyfills and helper functions.</li>
<li><a href="https://github.com/jakearchibald/idb" target="_blank" class="external">idb</a> - ISC, Jake Archibald - IndexedDB wrapper for ease of use.</li>
<li><a href="https://github.com/JSmith01/broadcastchannel-polyfill" target="_blank" class="external">broadcastchannel-polyfill</a> - Unlicense, Joshua Bell - Polyfill
for BroadcastChannel (facilitates communication between tabs).</li>
<li><a href="https://github.com/Lusito/tsx-dom" target="_blank" class="external">tsx-dom</a> - MIT, Santo Pfingsten - TSX/JSX that compiles to native <code>HTMLElement</code>s.</li>
</ul>
<a id="md:funding" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Funding<a href="#md:funding" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The initial development of Deputy was covered by a <a href="https://w.wiki/4xk$" target="_blank" class="external">Wikimedia Foundation Rapid Grant</a>. Deputy is now being maintained through volunteer effort without compensation.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:deputy"><span>Deputy</span></a><ul><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:developing"><span>Developing</span></a></li><li><a href="#md:testing"><span>Testing</span></a></li><li><ul><li><a href="#md:live-testing"><span>Live testing</span></a></li><li><a href="#md:automated-testing"><span>Automated testing</span></a></li></ul></li><li><a href="#md:licensing"><span>Licensing</span></a></li><li><a href="#md:funding"><span>Funding</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>deputy</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
